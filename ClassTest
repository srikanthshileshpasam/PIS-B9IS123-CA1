from prettytable import PrettyTable as pt
import pandas
from pandas import DataFrame


name_entry = ''
name = []

num_entry = 0
number = []

course_entry = ''
course = []

min_list = []
data = []

entries_count = 0
choice = 0
exit = False

        
def entry():
    name_entry = input('Enter student name:\n')
    name.append(name_entry)
        
    num_entry = int(input('Enter student number:\n'))
    while num_entry > 99999999:
        num_entry = int(input('Re enter student number(Should be less than 8 digits):\n'))
    number.append(num_entry)
        
    course_entry = input('Enter course code:')
    if len(course_entry) > 7:
        course_entry = input('Re enter course code (Should be less than 7 characters):')
    course.append(course_entry)
        
    data.append([number[entries_count], name[entries_count], course[entries_count]])
    data_frame = pandas.DataFrame(data, columns = ['Number', 'Name', 'Course'])
    data_frame.sort_values(by=['Number'], inplace = True)
    
    export_csv = data_frame.to_csv(r'/Users/srikanthshileshpasam/OneDrive - Dublin Business School (DBS)/Python/student_list.csv', index = None, header = True)
    print('All entries saved successfully! Safe to exit the application.')
        
def show():
    table = pt(['Student Number', 'Student Name', 'Student Course ID'])
    for i in range(0, entries_count):
        table.add_row([number[i], name[i], course[i]])
    print(table)
    
def retrieve():
    min_num = number.index(min(number))
    min_list = pt(['Student Number', 'Student Name', 'Student Course ID'])
    min_list.add_row([number[min_num], name[min_num], course[min_num]])
    print(min_list)    

        
            
while exit == False:
    choice = input('\n\n\nWhat would you like to do?(Select the corresponding number)\n1) Enter new details\n2) Tabulate all entries\n3) Retrieve lowest student number\nPress any other key to exit.\n\n')

    if choice == '1':
        entry()
        entries_count += 1

    elif choice == '2':
        show()
    
    elif choice == '3':
        retrieve()
                
    else:
        print('Exiting..')
        exit = True
